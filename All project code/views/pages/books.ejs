<%- include ('../partials/head') %>
<%- include ('../partials/menu') %>


<main>
  <div>
    <form action="/books" method="GET">
      <label for="search">Search:</label>
      <input type="text" id="search" name="search">
      <button type="submit">Submit</button>
    </form>
    <% try { %>
        <% var i = 0 %>
        <% books.forEach(function(book) { %>
            <% if (i % 3 === 0){ %>
                <div class="row">
            <%} %>
            <% i++ %>
            <div class="col-sm d-flex justify-content-center">
                <div class="card" style="width: 20rem;">
                    <div class="card-body">
                        <h5 class="card-title"><%= book.title %></h5>
                        <h6 class="card-subtitle mb-2 text-muted"> <%=book.name%>
                            <%for(var j = 0; j < book.authors.length; j++){ %>
                                <%= book.authors[j]%>
                            <%} %>
                        </h6>
                        <h7 class="card-subtitle mb-2 text-muted"><%= book.subjects[0]%></h7>
                    </div>
                </div>
            </div>
          <!-- <li><a href="/books/<%= book.id %>"><%= book.title %></a></li> -->

          <!-- Blank card bc Bootstrap doesn't support creating static grids -->
          <% if(i >= books.length && ((i % 3) != 0)){ %>
            <div class="col-sm d-flex justify-content-center">
                <div class="card" id="blank">
                    <div class="card-body">
                    </div>
                </div>
            </div>
          <% } %>
          <% if (i % 3 === 0) { %>
            </div>
          <% } %>
        <% }) %>
    <% } catch (err) { %>
      <p>No books found</p>
    <% } %>
  </div>
</main>

<style>
    #blank{
        border: none;
    }

    .card{
        margin-top: 5px;
        margin-bottom: 5px;
    }
</style>

<%- include ('../partials/footer') %>